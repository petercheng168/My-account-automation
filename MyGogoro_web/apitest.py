import requests
from bs4 import BeautifulSoup

# r = requests.get("https://opendata.epa.gov.tw/ws/Data/AQI/?$format=json", verify=False)
# list_of_dicts = r.json()
# print(r.status_code)
# print(type(r))
# print(type(list_of_dicts))
# for i in list_of_dicts:
#     print(i["County"], i["SiteName"], i["PM2.5"])


# scooter_data
# {
# "op_code": "update",
# "update_data": [
# {
# "scooter_vin": "RHMGSBT10K0122633",
# "user_settings": "[{"key": "0", "val": "0", "time": 1588744851},{"key": "19", "val": "0", "time": 1588744851},{"key": "8", "val": "0", "time": 1588744851},{"key": "27", "val": "1", "time": 1588744851},{"key": "16", "val": "0", "time": 1588744851},{"key": "24", "val": "5", "time": 1588744851},{"key": "13", "val": "0", "time": 1585195878},{"key": "2", "val": "0", "time": 1588744851},{"key": "21","val": "320,330", "time": 1588670957},{"key": "10", "val": "20", "time": 1588744851},{"key": "18", "val": "180", "time": 1588744851},{"key": "7", "val": "0", "time": 1588744851},{"key": "26", "val": "1", "time": 1588744851},{"key": "15","val": "1", "time": 1585195878},{"key": "179", "val": "178,93", "time": 571200910},{"key": "23", "val":"0", "time": 1588744851},{"key": "12", "val": "1", "time": 1588744851},{"key": "1", "val": "0", "time": 1588744851},{"key": "20", "val": "0", "time": 1588744851},{"key": "9", "val": "0", "time": 1582486539},{"key": "28", "val": "1", "time": 1588674567},{"key": "17", "val": "180", "time": 1588744851},{"key": "6", "val": "0,0,0,0,0,0", "time": 1588744851}, {"key": "25", "val": "1", "time": 1588744851},{"key": "3", "val": "0", "time": 1588744851},{"key": "22", "val": "0", "time": 1588744851},{"key": "11", "val": "0", "time": 1588744851},{"key": "14", "val": "0", "time": 1588744851}]"
# }
# ]
# }

read_token = requests.get("http://10.6.1.46:3032/app/cipher?env=pa&app=pa&resource=pa&username=pa.gen_admin@gogoro.com&password=123", verify=False)
soup = BeautifulSoup(read_token.text, 'html.parser')
token_value = 'Bearer ' + str(soup)
# print(token_value)

scooter_data = """
{
"op_code": "update",
"update_data": [
{
"scooter_vin": "RHMGSBT10K0122633",
"user_settings": "[{\\\"key\\\": \\\"0\\\", \\\"val\\\": \\\"0\\\", \\\"time\\\": 1588744851},{\\\"key\\\": \\\"19\\\", \\\"val\\\": \\\"0\\\", \\\"time\\\": 1588744851}, {\\\"key\\\": \\\"8\\\", \\\"val\\\": \\\"0\\\", \\\"time\\\": 1588744851},{\\\"key\\\": \\\"27\\\", \\\"val\\\": \\\"1\\\", \\\"time\\\": 1588744851},{\\\"key\\\": \\\"16\\\", \\\"val\\\": \\\"0\\\", \\\"time\\\": 1588744851},{\\\"key\\\": \\\"24\\\", \\\"val\\\": \\\"5\\\", \\\"time\\\": 1588744851}, {\\\"key\\\": \\\"13\\\", \\\"val\\\": \\\"0\\\", \\\"time\\\": 1585195878}, {\\\"key\\\": \\\"2\\\", \\\"val\\\": \\\"0\\\", \\\"time\\\": 1588744851}, {\\\"key\\\": \\\"21\\\", \\\"val\\\": \\\"320,330\\\", \\\"time\\\": 1588670957}, {\\\"key\\\": \\\"10\\\", \\\"val\\\": \\\"20\\\", \\\"time\\\": 1588744851},{\\\"key\\\": \\\"18\\\", \\\"val\\\": \\\"180\\\", \\\"time\\\": 1588744851}, {\\\"key\\\": \\\"7\\\", \\\"val\\\": \\\"0\\\", \\\"time\\\": 1588744851}, {\\\"key\\\": \\\"26\\\", \\\"val\\\": \\\"1\\\", \\\"time\\\": 1588744851},{\\\"key\\\": \\\"15\\\",\\\"val\\\": \\\"1\\\", \\\"time\\\": 1585195878}, {\\\"key\\\": \\\"179\\\", \\\"val\\\": \\\"178,93\\\", \\\"time\\\": 571200910}, {\\\"key\\\": \\\"23\\\", \\\"val\\\":\\\"0\\\", \\\"time\\\": 1588744851},{\\\"key\\\": \\\"12\\\", \\\"val\\\": \\\"1\\\", \\\"time\\\": 1588744851}, {\\\"key\\\": \\\"1\\\", \\\"val\\\": \\\"0\\\", \\\"time\\\": 1588744851},{\\\"key\\\": \\\"20\\\", \\\"val\\\": \\\"0\\\", \\\"time\\\": 1588744851}, {\\\"key\\\": \\\"9\\\", \\\"val\\\": \\\"0\\\", \\\"time\\\": 1582486539}, {\\\"key\\\": \\\"28\\\", \\\"val\\\": \\\"1\\\", \\\"time\\\": 1588674567}, {\\\"key\\\": \\\"17\\\", \\\"val\\\": \\\"180\\\", \\\"time\\\": 1588744851},{\\\"key\\\": \\\"6\\\", \\\"val\\\": \\\"0,0,0,0,0,0\\\", \\\"time\\\": 1588744851}, {\\\"key\\\": \\\"25\\\", \\\"val\\\": \\\"1\\\", \\\"time\\\": 1588744851}, {\\\"key\\\": \\\"3\\\", \\\"val\\\": \\\"0\\\", \\\"time\\\": 1588744851},{\\\"key\\\": \\\"22\\\", \\\"val\\\": \\\"0\\\", \\\"time\\\": 1588744851}, {\\\"key\\\": \\\"11\\\", \\\"val\\\": \\\"0\\\", \\\"time\\\": 1588744851}, {\\\"key\\\": \\\"14\\\", \\\"val\\\": \\\"0\\\", \\\"time\\\": 1588744851}]"
}
]
}
"""

r = requests.post("https://pa-goplatform.gogoro.com/go-platform/v1/scooters", headers={'Authorization': token_value, 'Content-Type': 'application/json', 'Go-Client': 'pa'}, data = scooter_data)
print (r.text)
print (r.status_code)